import {
  check_target,
  component,
  hmr,
  if_block,
  legacy_api,
  spread_props,
  wrap_snippet
} from "./chunk-G357VPZH.js";
import {
  append,
  comment,
  mount,
  unmount
} from "./chunk-XQRS24UU.js";
import {
  FILENAME,
  HMR,
  derived,
  fallback,
  first_child,
  get,
  mark_module_end,
  mark_module_start,
  pop,
  proxy,
  push,
  set,
  user_effect
} from "./chunk-J5SW3AYT.js";
import {
  dedent
} from "./chunk-Y5XYDSSM.js";
import {
  require_core_events
} from "./chunk-A7Q5UTHS.js";
import {
  __export
} from "./chunk-RFMQWATN.js";
import {
  require_client_logger
} from "./chunk-W2KRNAHI.js";
import {
  ya
} from "./chunk-JDACI3QJ.js";
import {
  require_preview_api
} from "./chunk-YUW5RT5C.js";
import {
  __toESM
} from "./chunk-SROXYCZ4.js";

// ../../node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/components/DecoratorHandler.svelte
mark_module_start();
DecoratorHandler[FILENAME] = "/home/kali/web-sdk/node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/components/DecoratorHandler.svelte";
function DecoratorHandler($$anchor, $$props) {
  check_target(new.target);
  push($$props, true, DecoratorHandler);
  let propsWithoutDocgenEvents = derived(() => Object.fromEntries(Object.entries($$props.props).filter(([key]) => !key.startsWith("event_"))));
  var fragment = comment();
  var node = first_child(fragment);
  {
    var consequent = ($$anchor2) => {
      var fragment_1 = comment();
      var node_1 = first_child(fragment_1);
      component(node_1, () => $$props.decorator.Component, ($$anchor3, $$component) => {
        $$component($$anchor3, spread_props(() => $$props.decorator.props, {
          children: wrap_snippet(DecoratorHandler, ($$anchor4, $$slotProps) => {
            var fragment_2 = comment();
            var node_2 = first_child(fragment_2);
            component(node_2, () => $$props.Component, ($$anchor5, $$component2) => {
              $$component2($$anchor5, spread_props(() => get(propsWithoutDocgenEvents)));
            });
            append($$anchor4, fragment_2);
          }),
          $$slots: { default: true }
        }));
      });
      append($$anchor2, fragment_1);
    };
    var alternate = ($$anchor2) => {
      var fragment_3 = comment();
      var node_3 = first_child(fragment_3);
      component(node_3, () => $$props.Component, ($$anchor3, $$component) => {
        $$component($$anchor3, spread_props(() => get(propsWithoutDocgenEvents)));
      });
      append($$anchor2, fragment_3);
    };
    if_block(node, ($$render) => {
      if ($$props.decorator) $$render(consequent);
      else $$render(alternate, false);
    });
  }
  append($$anchor, fragment);
  return pop({ ...legacy_api() });
}
if (import.meta.hot) {
  DecoratorHandler = hmr(DecoratorHandler, () => DecoratorHandler[HMR].source);
  import.meta.hot.accept((module) => {
    module.default[HMR].source = DecoratorHandler[HMR].source;
    set(DecoratorHandler[HMR].source, module.default[HMR].original);
  });
}
var DecoratorHandler_default = DecoratorHandler;
mark_module_end(DecoratorHandler);

// ../../node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/components/PreviewRender.svelte
mark_module_start();
PreviewRender[FILENAME] = "/home/kali/web-sdk/node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/components/PreviewRender.svelte";
function PreviewRender($$anchor, $$props) {
  check_target(new.target);
  push($$props, true, PreviewRender);
  let $$d = derived(() => {
    return $$props.storyFn();
  }), Component = derived(() => get($$d).Component), props = derived(() => fallback(get($$d).props, () => ({}), true));
  user_effect(() => {
    if (!get(Component)) {
      $$props.showError({
        title: `Expecting a Svelte component from the story: "${$$props.name}" of "${$$props.title}".`,
        description: dedent`
        Did you forget to return the Svelte component configuration from the story?
        Use "() => ({ Component: YourComponent, props: {} })"
        when defining the story.
      `
      });
    }
  });
  var fragment = comment();
  var node = first_child(fragment);
  DecoratorHandler_default(node, {
    get Component() {
      return get(Component);
    },
    get props() {
      return get(props);
    }
  });
  append($$anchor, fragment);
  return pop({ ...legacy_api() });
}
if (import.meta.hot) {
  PreviewRender = hmr(PreviewRender, () => PreviewRender[HMR].source);
  import.meta.hot.accept((module) => {
    module.default[HMR].source = PreviewRender[HMR].source;
    set(PreviewRender[HMR].source, module.default[HMR].original);
  });
}
var PreviewRender_default = PreviewRender;
mark_module_end(PreviewRender);

// ../../node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/createReactiveProps.svelte.js
var createReactiveProps = (data) => {
  const props = proxy(data);
  return props;
};

// ../../node_modules/.pnpm/@storybook+svelte@9.0.15_storybook@9.0.15_@testing-library+dom@10.4.0_prettier@3.6.2__svelte@5.20.5/node_modules/@storybook/svelte/dist/chunk-JUVUTBRS.mjs
var import_client_logger = __toESM(require_client_logger(), 1);
var import_core_events = __toESM(require_core_events(), 1);
var import_preview_api = __toESM(require_preview_api(), 1);
var entry_preview_exports = {};
__export(entry_preview_exports, { applyDecorators: () => decorateStory, argTypesEnhancers: () => argTypesEnhancers, mount: () => mount2, parameters: () => parameters, render: () => render, renderToCanvas: () => renderToCanvas });
function hasKeyword(keyword, keywords) {
  return keywords ? keywords.find((k) => k.name === keyword) != null : false;
}
var extractArgTypes = (component2) => {
  try {
    let docgen = component2.__docgen;
    if (docgen) return createArgTypes(docgen);
  } catch (err) {
    import_client_logger.logger.log(`Error extracting argTypes: ${err}`);
  }
  return {};
};
var createArgTypes = (docgen) => {
  let results = {};
  return docgen.data && docgen.data.forEach((item) => {
    var _a, _b, _c;
    results[item.name] = { ...parseTypeToControl(item.type), name: item.name, description: item.description || void 0, type: { required: hasKeyword("required", item.keywords || []), name: ((_a = item.type) == null ? void 0 : _a.text) === "{}" ? "object" : (_b = item.type) == null ? void 0 : _b.text }, table: { type: { summary: (_c = item.type) == null ? void 0 : _c.text }, defaultValue: { summary: item.defaultValue }, category: "properties" } };
  }), docgen.events && docgen.events.forEach((item) => {
    results[`event_${item.name}`] = { name: item.name, action: item.name, control: false, ...item.description ? { description: item.description } : {}, table: { category: "events" } };
  }), docgen.slots && docgen.slots.forEach((item) => {
    var _a;
    results[`slot_${item.name}`] = { name: item.name, control: false, description: [item.description, (_a = item.params) == null ? void 0 : _a.map((p) => `\`${p.name}\``).join(" ")].filter((p) => p).join(`

`), table: { category: "slots" } };
  }), results;
};
var parseTypeToControl = (type) => {
  if (!type) return null;
  if (type.kind === "type") switch (type.type) {
    case "string":
      return { control: { type: "text" } };
    case "any":
      return { control: { type: "object" } };
    default:
      return { control: { type: type.type } };
  }
  else if (type.kind === "union") {
    if (Array.isArray(type.type) && !type.type.some((t) => t.kind !== "const" || !["string", "number", "null", "undefined"].includes(t.type))) {
      let options = type.type.map((t) => t.value);
      return { control: { type: "radio", labels: options.map(String) }, options };
    }
  } else if (type.kind === "function") return { control: null };
  return null;
};
function extractComponentDescription(component2) {
  var _a;
  return ((_a = component2 == null ? void 0 : component2.__docgen) == null ? void 0 : _a.description) || "";
}
var storyIdsToRemountFromResetArgsEvent = /* @__PURE__ */ new Set();
import_preview_api.addons.getChannel().on(import_core_events.RESET_STORY_ARGS, ({ storyId }) => {
  storyIdsToRemountFromResetArgsEvent.add(storyId);
});
var componentsByDomElement = /* @__PURE__ */ new Map();
function renderToCanvas({ storyFn, title, name, showMain, showError, storyContext, forceRemount }, canvasElement) {
  function unmount2(canvasElementToUnmount) {
    let { mountedComponent } = componentsByDomElement.get(canvasElementToUnmount) ?? {};
    mountedComponent && (unmount(mountedComponent), componentsByDomElement.delete(canvasElementToUnmount));
  }
  let existingComponent = componentsByDomElement.get(canvasElement), remount = forceRemount;
  if (storyIdsToRemountFromResetArgsEvent.has(storyContext.id) && (remount = true, storyIdsToRemountFromResetArgsEvent.delete(storyContext.id)), remount && unmount2(canvasElement), !existingComponent || remount) {
    let props = createReactiveProps({ storyFn, storyContext, name, title, showError }), mountedComponent = mount(PreviewRender_default, { target: canvasElement, props });
    componentsByDomElement.set(canvasElement, { mountedComponent, props });
  } else Object.assign(existingComponent.props, { storyFn, storyContext, name, title, showError });
  return showMain(), () => {
    unmount2(canvasElement);
  };
}
var render = (args, context) => {
  let { id, component: Component } = context;
  if (!Component) throw new Error(`Unable to render story ${id} as the component annotation is missing from the default export`);
  return { Component, props: args };
};
function unWrap(obj) {
  return obj && typeof obj == "object" && "default" in obj ? obj.default : obj;
}
function prepareStory(context, rawStory, rawInnerStory) {
  let story = unWrap(rawStory), innerStory = rawInnerStory && unWrap(rawInnerStory), preparedStory;
  return !story || Object.keys(story).length === 0 ? preparedStory = { Component: context.component } : story.Component ? preparedStory = story : preparedStory = { Component: story }, innerStory ? { Component: DecoratorHandler_default, props: { ...innerStory, decorator: preparedStory } } : { ...preparedStory, argTypes: context.argTypes };
}
function decorateStory(storyFn, decorators) {
  return decorators.reduce((decorated, decorator) => (context) => {
    let story, decoratedStory = decorator((update) => (story = decorated({ ...context, ...(0, import_preview_api.sanitizeStoryContextUpdate)(update) }), story), context);
    return story || (story = decorated(context)), decoratedStory === story ? story : prepareStory(context, decoratedStory, story);
  }, (context) => prepareStory(context, storyFn(context)));
}
var mount2 = (context) => async (Component, options) => (Component && (context.originalStoryFn = () => ({ Component, props: options && "props" in options ? options == null ? void 0 : options.props : options })), await context.renderToCanvas(), context.canvas);
var parameters = { renderer: "svelte", docs: { story: { inline: true }, extractArgTypes, extractComponentDescription } };
var argTypesEnhancers = [ya];

export {
  PreviewRender_default,
  createReactiveProps,
  entry_preview_exports,
  renderToCanvas,
  render,
  decorateStory,
  mount2,
  parameters,
  argTypesEnhancers
};
//# sourceMappingURL=chunk-LSBI6MVX.js.map
